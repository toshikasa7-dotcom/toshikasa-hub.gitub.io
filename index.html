<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GamingGearTH - อุปกรณ์เกมมิ่งเกียร์ครบวงจร</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts: Prompt for Thai text -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Prompt', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: white;
        }
        .gaming-gradient {
            background: linear-gradient(90deg, #7c3aed 0%, #db2777 100%);
        }
        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #4c1d95;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6d28d9;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px -5px rgba(124, 58, 237, 0.3);
        }
        /* Fade In Animation */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Mock Data ---
        const productsData = [
            { id: 1, name: "Pro Strike RGB Keyboard", price: 2590, category: "Keyboard", image: "https://images.unsplash.com/photo-1595225476474-87563907a212?auto=format&fit=crop&q=80&w=800", description: "คีย์บอร์ดแมคคานิคอล สวิตช์ Blue เสียงแน่น ไฟ RGB" },
            { id: 2, name: "Viper Elite Mouse", price: 1290, category: "Mouse", image: "https://images.unsplash.com/photo-1527814050087-3793815479db?auto=format&fit=crop&q=80&w=800", description: "เมาส์เกมมิ่ง 16000 DPI น้ำหนักเบา" },
            { id: 3, name: "Cloud Surround Headset", price: 3490, category: "Headset", image: "https://images.unsplash.com/photo-1618366712010-f4ae9c647dcb?auto=format&fit=crop&q=80&w=800", description: "หูฟัง 7.1 Surround ตัดเสียงรบกวน" },
            { id: 4, name: "Streamer Mic Pro", price: 4500, category: "Microphone", image: "https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=800", description: "ไมค์คอนเดนเซอร์สำหรับการสตรีมโดยเฉพาะ" },
            { id: 5, name: "Ultra Wide Monitor 34\"", price: 15900, category: "Monitor", image: "https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?auto=format&fit=crop&q=80&w=800", description: "จอโค้ง 144Hz 1ms ภาพลื่นไหล" },
            { id: 6, name: "Stealth Mousepad XXL", price: 890, category: "Accessories", image: "https://images.unsplash.com/photo-1615663245857-acda6b698418?auto=format&fit=crop&q=80&w=800", description: "แผ่นรองเมาส์ Speed ขนาดใหญ่เต็มโต๊ะ" },
            { id: 7, name: "TKL Wireless Keyboard", price: 3200, category: "Keyboard", image: "https://images.unsplash.com/photo-1587829741301-dc798b91add1?auto=format&fit=crop&q=80&w=800", description: "คีย์บอร์ดไร้สาย TKL ประหยัดพื้นที่" },
            { id: 8, name: "Ergo Gaming Chair", price: 8900, category: "Furniture", image: "https://images.unsplash.com/photo-1598550476439-6847785fcea6?auto=format&fit=crop&q=80&w=800", description: "เก้าอี้เกมมิ่งเพื่อสุขภาพ ปรับเอน 180 องศา" }
        ];

        // --- Main App Component ---
        const App = () => {
            // State
            const [view, setView] = useState("HOME"); // HOME, LOGIN, REGISTER, PROFILE, CHECKOUT, SUCCESS
            const [user, setUser] = useState(null); // null = Guest
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [searchTerm, setSearchTerm] = useState("");
            const [notification, setNotification] = useState(null);
            const [orders, setOrders] = useState([]); // Store order history

            // Derived State
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const cartItemCount = cart.reduce((a, b) => a + b.quantity, 0);

            // Helpers
            const showNotification = (msg) => {
                setNotification(msg);
                setTimeout(() => setNotification(null), 3000);
            };

            const addToCart = (product) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    if (existing) return prev.map(item => item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item);
                    return [...prev, { ...product, quantity: 1 }];
                });
                showNotification(`เพิ่ม ${product.name} แล้ว`);
            };

            const removeFromCart = (id) => setCart(prev => prev.filter(item => item.id !== id));
            
            const updateQuantity = (id, delta) => {
                setCart(prev => prev.map(item => item.id === id ? { ...item, quantity: Math.max(1, item.quantity + delta) } : item));
            };

            const handleLogout = () => {
                setUser(null);
                setView("HOME");
                showNotification("ออกจากระบบเรียบร้อย");
            };

            const placeOrder = (orderDetails) => {
                const newOrder = {
                    id: `ORD-${Date.now()}`,
                    date: new Date().toLocaleDateString('th-TH'),
                    items: [...cart],
                    total: totalAmount,
                    status: "กำลังจัดส่ง",
                    ...orderDetails
                };
                setOrders([newOrder, ...orders]);
                setCart([]);
                setView("SUCCESS");
            };

            // --- Sub-Components (Inline for single file) ---

            // 1. Navbar
            const Navbar = () => (
                <nav className="sticky top-0 z-50 glass-panel border-b border-white/10">
                    <div className="container mx-auto px-4 py-3 flex justify-between items-center gap-4">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView("HOME")}>
                            <i className="fa-solid fa-gamepad text-3xl text-purple-500"></i>
                            <span className="text-xl font-bold tracking-wider hidden sm:block">Gaming<span className="text-purple-500">Gear</span>TH</span>
                        </div>

                        <div className="flex-1 max-w-md relative hidden md:block">
                            <input 
                                type="text" 
                                placeholder="ค้นหา..." 
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="w-full bg-slate-800 text-sm rounded-full py-2 px-4 focus:outline-none focus:ring-2 focus:ring-purple-500 text-white"
                            />
                            <i className="fa-solid fa-search absolute right-3 top-2.5 text-slate-400"></i>
                        </div>

                        <div className="flex items-center gap-4">
                            {user ? (
                                <div className="flex items-center gap-2 cursor-pointer hover:text-purple-400" onClick={() => setView("PROFILE")}>
                                    <div className="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-sm font-bold">
                                        {user.name.charAt(0)}
                                    </div>
                                    <span className="hidden sm:block text-sm">{user.name}</span>
                                </div>
                            ) : (
                                <button onClick={() => setView("LOGIN")} className="text-sm hover:text-purple-400">
                                    <i className="fa-solid fa-user"></i> เข้าสู่ระบบ
                                </button>
                            )}

                            <button onClick={() => setIsCartOpen(true)} className="relative p-2 hover:bg-white/10 rounded-full">
                                <i className="fa-solid fa-cart-shopping text-xl"></i>
                                {cartItemCount > 0 && (
                                    <span className="absolute -top-1 -right-1 bg-pink-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full animate-bounce">
                                        {cartItemCount}
                                    </span>
                                )}
                            </button>
                        </div>
                    </div>
                </nav>
            );

            // 2. Home View
            const HomeView = () => {
                const [category, setCategory] = useState("All");
                const categories = ["All", "Keyboard", "Mouse", "Headset", "Monitor", "Accessories"];

                const filtered = productsData.filter(p => 
                    (category === "All" || p.category === category) &&
                    p.name.toLowerCase().includes(searchTerm.toLowerCase())
                );

                return (
                    <div className="fade-in pb-10">
                        {/* Hero */}
                        <div className="relative h-[300px] md:h-[400px] w-full bg-slate-800 overflow-hidden mb-8">
                            <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?auto=format&fit=crop&q=80&w=1920" className="w-full h-full object-cover opacity-40" />
                            <div className="absolute inset-0 bg-gradient-to-t from-[#0f172a] to-transparent"></div>
                            <div className="absolute inset-0 flex flex-col justify-center items-center text-center px-4">
                                <h1 className="text-3xl md:text-6xl font-bold mb-4 drop-shadow-lg">ปลดล็อคพลัง <span className="text-transparent bg-clip-text gaming-gradient">Gamer</span></h1>
                                <button onClick={() => document.getElementById('shop').scrollIntoView()} className="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:scale-105 transition-transform">ช้อปเลย</button>
                            </div>
                        </div>

                        <div id="shop" className="container mx-auto px-4">
                            {/* Filter */}
                            <div className="flex flex-wrap justify-center gap-2 mb-8">
                                {categories.map(cat => (
                                    <button key={cat} onClick={() => setCategory(cat)} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${category === cat ? 'bg-purple-600 text-white shadow-lg' : 'bg-slate-800 text-gray-400 hover:bg-slate-700'}`}>
                                        {cat === "All" ? "ทั้งหมด" : cat}
                                    </button>
                                ))}
                            </div>

                            {/* Grid */}
                            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                {filtered.map(product => (
                                    <div key={product.id} className="bg-slate-800 rounded-xl overflow-hidden card-hover border border-slate-700 group">
                                        <div className="h-48 overflow-hidden relative">
                                            <img src={product.image} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" />
                                            <button onClick={() => addToCart(product)} className="absolute bottom-2 right-2 bg-purple-600 text-white p-2 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0">
                                                <i className="fa-solid fa-plus"></i>
                                            </button>
                                        </div>
                                        <div className="p-4">
                                            <div className="text-xs text-purple-400 mb-1">{product.category}</div>
                                            <h3 className="font-bold text-lg mb-1 truncate">{product.name}</h3>
                                            <p className="text-gray-400 text-xs mb-3 line-clamp-2">{product.description}</p>
                                            <div className="flex justify-between items-center">
                                                <span className="text-lg font-bold text-white">฿{product.price.toLocaleString()}</span>
                                                <button onClick={() => addToCart(product)} className="text-sm bg-slate-700 hover:bg-purple-600 px-3 py-1 rounded transition-colors">ใส่ตะกร้า</button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            // 3. Auth Views (Login/Register)
            const LoginView = () => {
                const handleLogin = (e) => {
                    e.preventDefault();
                    // Mock Login
                    setUser({ name: "Admin Gamer", email: "admin@gaming.com" });
                    setView("HOME");
                    showNotification("ยินดีต้อนรับกลับ!");
                };
                return (
                    <div className="min-h-[80vh] flex items-center justify-center p-4 fade-in">
                        <div className="bg-slate-800 p-8 rounded-2xl shadow-2xl w-full max-w-md border border-slate-700">
                            <h2 className="text-3xl font-bold mb-6 text-center text-purple-400">เข้าสู่ระบบ</h2>
                            <form onSubmit={handleLogin} className="space-y-4">
                                <div>
                                    <label className="block text-sm text-gray-400 mb-1">อีเมล</label>
                                    <input type="email" required className="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none" placeholder="example@email.com" />
                                </div>
                                <div>
                                    <label className="block text-sm text-gray-400 mb-1">รหัสผ่าน</label>
                                    <input type="password" required className="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none" placeholder="••••••••" />
                                </div>
                                <button type="submit" className="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-all">เข้าสู่ระบบ</button>
                            </form>
                            <div className="mt-4 text-center text-sm text-gray-400">
                                ยังไม่มีบัญชี? <span onClick={() => setView("REGISTER")} className="text-purple-400 cursor-pointer hover:underline">สมัครสมาชิก</span>
                            </div>
                        </div>
                    </div>
                );
            };

            const RegisterView = () => {
                const handleRegister = (e) => {
                    e.preventDefault();
                    // Mock Register
                    const name = e.target.name.value;
                    setUser({ name: name, email: e.target.email.value });
                    setView("HOME");
                    showNotification("สมัครสมาชิกสำเร็จ!");
                };
                return (
                    <div className="min-h-[80vh] flex items-center justify-center p-4 fade-in">
                        <div className="bg-slate-800 p-8 rounded-2xl shadow-2xl w-full max-w-md border border-slate-700">
                            <h2 className="text-3xl font-bold mb-6 text-center text-purple-400">สมัครสมาชิก</h2>
                            <form onSubmit={handleRegister} className="space-y-4">
                                <div>
                                    <label className="block text-sm text-gray-400 mb-1">ชื่อผู้ใช้</label>
                                    <input name="name" type="text" required className="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none" placeholder="Gamer Name" />
                                </div>
                                <div>
                                    <label className="block text-sm text-gray-400 mb-1">อีเมล</label>
                                    <input name="email" type="email" required className="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none" placeholder="example@email.com" />
                                </div>
                                <div>
                                    <label className="block text-sm text-gray-400 mb-1">รหัสผ่าน</label>
                                    <input type="password" required className="w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 focus:outline-none" placeholder="••••••••" />
                                </div>
                                <button type="submit" className="w-full bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 rounded-lg transition-all">สมัครสมาชิก</button>
                            </form>
                            <div className="mt-4 text-center text-sm text-gray-400">
                                มีบัญชีอยู่แล้ว? <span onClick={() => setView("LOGIN")} className="text-purple-400 cursor-pointer hover:underline">เข้าสู่ระบบ</span>
                            </div>
                        </div>
                    </div>
                );
            };

            // 4. Profile View (Member Management & Orders)
            const ProfileView = () => (
                <div className="container mx-auto px-4 py-8 fade-in">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {/* User Info */}
                        <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 h-fit">
                            <div className="text-center mb-6">
                                <div className="w-24 h-24 bg-purple-600 rounded-full mx-auto flex items-center justify-center text-4xl font-bold mb-4">
                                    {user?.name.charAt(0)}
                                </div>
                                <h2 className="text-2xl font-bold">{user?.name}</h2>
                                <p className="text-gray-400">{user?.email}</p>
                            </div>
                            <button onClick={handleLogout} className="w-full border border-red-500 text-red-500 hover:bg-red-500 hover:text-white py-2 rounded-lg transition-all">
                                <i className="fa-solid fa-right-from-bracket"></i> ออกจากระบบ
                            </button>
                        </div>

                        {/* Order History */}
                        <div className="md:col-span-2">
                            <h3 className="text-2xl font-bold mb-4 flex items-center gap-2">
                                <i className="fa-solid fa-clock-rotate-left text-purple-500"></i> ประวัติการสั่งซื้อ
                            </h3>
                            <div className="bg-slate-800 rounded-xl border border-slate-700 overflow-hidden">
                                {orders.length === 0 ? (
                                    <div className="p-8 text-center text-gray-500">
                                        <p>ยังไม่มีรายการสั่งซื้อ</p>
                                        <button onClick={() => setView("HOME")} className="mt-4 text-purple-400 underline">ไปช้อปปิ้งกันเถอะ</button>
                                    </div>
                                ) : (
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-left">
                                            <thead className="bg-slate-900 text-gray-400 border-b border-slate-700">
                                                <tr>
                                                    <th className="p-4">หมายเลขคำสั่งซื้อ</th>
                                                    <th className="p-4">วันที่</th>
                                                    <th className="p-4">ยอดรวม</th>
                                                    <th className="p-4">สถานะ</th>
                                                </tr>
                                            </thead>
                                            <tbody className="divide-y divide-slate-700">
                                                {orders.map(order => (
                                                    <tr key={order.id} className="hover:bg-slate-700/50">
                                                        <td className="p-4 font-mono text-sm">{order.id}</td>
                                                        <td className="p-4 text-sm text-gray-300">{order.date}</td>
                                                        <td className="p-4 font-bold text-purple-400">฿{order.total.toLocaleString()}</td>
                                                        <td className="p-4">
                                                            <span className="bg-green-900 text-green-300 text-xs px-2 py-1 rounded-full border border-green-700">
                                                                {order.status}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );

            // 5. Checkout View (Payment System)
            const CheckoutView = () => {
                const [step, setStep] = useState(1); // 1: Address, 2: Payment
                const [address, setAddress] = useState({ name: user?.name || "", tel: "", address: "" });
                const [paymentMethod, setPaymentMethod] = useState("qr"); // qr, card, cod

                const handleSubmitAddress = (e) => {
                    e.preventDefault();
                    setStep(2);
                };

                const handlePayment = () => {
                    // Simulate Payment Processing
                    if (paymentMethod === 'card') {
                        // Validate card (mock)
                    }
                    placeOrder({ 
                        address, 
                        paymentMethod: paymentMethod === 'qr' ? 'QR Code' : paymentMethod === 'card' ? 'Credit Card' : 'เก็บเงินปลายทาง' 
                    });
                };

                return (
                    <div className="container mx-auto px-4 py-8 max-w-4xl fade-in">
                        <h2 className="text-3xl font-bold mb-6">ชำระเงิน (Checkout)</h2>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                            
                            {/* Steps Form */}
                            <div className="md:col-span-2 space-y-6">
                                {/* Step 1: Address */}
                                <div className={`bg-slate-800 p-6 rounded-xl border ${step === 1 ? 'border-purple-500' : 'border-slate-700'}`}>
                                    <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                                        <span className="bg-purple-600 w-6 h-6 rounded-full flex items-center justify-center text-sm">1</span> ที่อยู่จัดส่ง
                                    </h3>
                                    {step === 1 ? (
                                        <form onSubmit={handleSubmitAddress} className="space-y-4">
                                            <div className="grid grid-cols-2 gap-4">
                                                <input required type="text" placeholder="ชื่อ-นามสกุล" className="bg-slate-900 border border-slate-700 rounded p-3 w-full" value={address.name} onChange={e => setAddress({...address, name: e.target.value})} />
                                                <input required type="tel" placeholder="เบอร์โทรศัพท์" className="bg-slate-900 border border-slate-700 rounded p-3 w-full" value={address.tel} onChange={e => setAddress({...address, tel: e.target.value})} />
                                            </div>
                                            <textarea required placeholder="ที่อยู่ (บ้านเลขที่, ถนน, แขวง/ตำบล, เขต/อำเภอ, จังหวัด, รหัสไปรษณีย์)" className="bg-slate-900 border border-slate-700 rounded p-3 w-full h-24" value={address.address} onChange={e => setAddress({...address, address: e.target.value})}></textarea>
                                            <button type="submit" className="bg-purple-600 px-6 py-2 rounded font-bold hover:bg-purple-700">ถัดไป</button>
                                        </form>
                                    ) : (
                                        <div className="text-gray-400 text-sm">
                                            <p>{address.name} ({address.tel})</p>
                                            <p>{address.address}</p>
                                            <button onClick={() => setStep(1)} className="text-purple-400 underline text-xs mt-2">แก้ไข</button>
                                        </div>
                                    )}
                                </div>

                                {/* Step 2: Payment */}
                                <div className={`bg-slate-800 p-6 rounded-xl border ${step === 2 ? 'border-purple-500' : 'border-slate-700'} ${step < 2 ? 'opacity-50 pointer-events-none' : ''}`}>
                                    <h3 className="text-xl font-bold mb-4 flex items-center gap-2">
                                        <span className="bg-purple-600 w-6 h-6 rounded-full flex items-center justify-center text-sm">2</span> วิธีชำระเงิน
                                    </h3>
                                    
                                    <div className="space-y-3">
                                        <label className={`flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all ${paymentMethod === 'qr' ? 'border-purple-500 bg-purple-900/20' : 'border-slate-700 bg-slate-900'}`}>
                                            <input type="radio" name="payment" value="qr" checked={paymentMethod === 'qr'} onChange={() => setPaymentMethod('qr')} />
                                            <i className="fa-solid fa-qrcode text-2xl text-pink-500"></i>
                                            <div>
                                                <div className="font-bold">QR Code PromptPay</div>
                                                <div className="text-xs text-gray-400">สแกนจ่ายได้ทุกธนาคาร ฟรีค่าธรรมเนียม</div>
                                            </div>
                                        </label>

                                        <label className={`flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all ${paymentMethod === 'card' ? 'border-purple-500 bg-purple-900/20' : 'border-slate-700 bg-slate-900'}`}>
                                            <input type="radio" name="payment" value="card" checked={paymentMethod === 'card'} onChange={() => setPaymentMethod('card')} />
                                            <i className="fa-regular fa-credit-card text-2xl text-blue-400"></i>
                                            <div>
                                                <div className="font-bold">บัตรเครดิต / เดบิต</div>
                                                <div className="text-xs text-gray-400">Visa, Mastercard, JCB</div>
                                            </div>
                                        </label>

                                        <label className={`flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all ${paymentMethod === 'cod' ? 'border-purple-500 bg-purple-900/20' : 'border-slate-700 bg-slate-900'}`}>
                                            <input type="radio" name="payment" value="cod" checked={paymentMethod === 'cod'} onChange={() => setPaymentMethod('cod')} />
                                            <i className="fa-solid fa-truck-fast text-2xl text-green-400"></i>
                                            <div>
                                                <div className="font-bold">เก็บเงินปลายทาง (COD)</div>
                                                <div className="text-xs text-gray-400">จ่ายเงินสดเมื่อได้รับของ</div>
                                            </div>
                                        </label>
                                    </div>

                                    {paymentMethod === 'card' && (
                                        <div className="mt-4 p-4 bg-slate-900 rounded border border-slate-700 animate-pulse">
                                            <p className="text-sm text-gray-400 mb-2">ข้อมูลบัตรเครดิต (จำลอง)</p>
                                            <input type="text" placeholder="หมายเลขบัตร 16 หลัก" className="w-full bg-slate-800 border border-slate-600 rounded p-2 mb-2" />
                                            <div className="flex gap-2">
                                                <input type="text" placeholder="MM/YY" className="w-1/2 bg-slate-800 border border-slate-600 rounded p-2" />
                                                <input type="text" placeholder="CVV" className="w-1/2 bg-slate-800 border border-slate-600 rounded p-2" />
                                            </div>
                                        </div>
                                    )}

                                    {paymentMethod === 'qr' && (
                                        <div className="mt-4 p-4 bg-white rounded flex flex-col items-center justify-center text-slate-900">
                                            <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/QR_code_for_mobile_English_Wikipedia.svg" className="w-32 h-32" />
                                            <p className="font-bold mt-2">ยอดชำระ: ฿{totalAmount.toLocaleString()}</p>
                                        </div>
                                    )}
                                </div>
                            </div>

                            {/* Summary */}
                            <div className="h-fit bg-slate-800 p-6 rounded-xl border border-slate-700">
                                <h3 className="text-xl font-bold mb-4">สรุปคำสั่งซื้อ</h3>
                                <div className="space-y-2 mb-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                                    {cart.map(item => (
                                        <div key={item.id} className="flex justify-between text-sm">
                                            <span className="text-gray-300 w-2/3 truncate">{item.quantity}x {item.name}</span>
                                            <span className="font-mono">฿{(item.price * item.quantity).toLocaleString()}</span>
                                        </div>
                                    ))}
                                </div>
                                <div className="border-t border-slate-700 pt-4 flex justify-between items-center text-lg font-bold mb-6">
                                    <span>ยอดรวมสุทธิ</span>
                                    <span className="text-purple-400">฿{totalAmount.toLocaleString()}</span>
                                </div>
                                <button 
                                    onClick={handlePayment} 
                                    disabled={step < 2}
                                    className={`w-full py-3 rounded-lg font-bold transition-all ${step < 2 ? 'bg-slate-700 text-gray-500' : 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white shadow-lg'}`}
                                >
                                    {paymentMethod === 'cod' ? 'ยืนยันการสั่งซื้อ' : 'ชำระเงิน'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            const SuccessView = () => (
                <div className="min-h-[60vh] flex flex-col items-center justify-center text-center fade-in">
                    <div className="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center text-5xl text-white mb-6 shadow-[0_0_30px_rgba(34,197,94,0.6)]">
                        <i className="fa-solid fa-check"></i>
                    </div>
                    <h2 className="text-4xl font-bold mb-2">สั่งซื้อสำเร็จ!</h2>
                    <p className="text-gray-400 text-lg mb-8">ขอบคุณที่อุดหนุนสินค้าของเรา</p>
                    <div className="flex gap-4">
                        <button onClick={() => setView("PROFILE")} className="bg-slate-700 hover:bg-slate-600 px-6 py-2 rounded-lg">ดูประวัติการซื้อ</button>
                        <button onClick={() => setView("HOME")} className="bg-purple-600 hover:bg-purple-700 px-6 py-2 rounded-lg font-bold text-white">กลับหน้าหลัก</button>
                    </div>
                </div>
            );

            // --- Render Logic ---
            return (
                <div className="min-h-screen pb-10 flex flex-col">
                    <Navbar />
                    
                    {/* Notification */}
                    {notification && (
                        <div className="fixed top-20 right-4 z-[100] bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 animate-bounce">
                            <i className="fa-solid fa-check-circle"></i> {notification}
                        </div>
                    )}

                    {/* Main Content Area */}
                    <main className="flex-1 mt-6">
                        {view === "HOME" && <HomeView />}
                        {view === "LOGIN" && <LoginView />}
                        {view === "REGISTER" && <RegisterView />}
                        {view === "PROFILE" && <ProfileView />}
                        {view === "CHECKOUT" && <CheckoutView />}
                        {view === "SUCCESS" && <SuccessView />}
                    </main>

                    {/* Cart Sidebar (Always rendered but hidden) */}
                    {isCartOpen && (
                        <div className="fixed inset-0 z-[60]">
                            <div className="absolute inset-0 bg-black/70 backdrop-blur-sm" onClick={() => setIsCartOpen(false)}></div>
                            <div className="absolute right-0 top-0 h-full w-full max-w-md bg-slate-900 border-l border-slate-700 shadow-2xl flex flex-col transform transition-transform duration-300">
                                <div className="p-5 border-b border-slate-800 flex justify-between items-center bg-slate-800/50">
                                    <h2 className="text-xl font-bold flex items-center gap-2">ตะกร้าสินค้า</h2>
                                    <button onClick={() => setIsCartOpen(false)}><i className="fa-solid fa-xmark text-xl"></i></button>
                                </div>
                                <div className="flex-1 overflow-y-auto p-5 space-y-4">
                                    {cart.length === 0 ? <p className="text-center text-gray-500 mt-10">ตะกร้าว่างเปล่า</p> : 
                                        cart.map(item => (
                                            <div key={item.id} className="flex gap-4 bg-slate-800 p-3 rounded-lg border border-slate-700">
                                                <img src={item.image} className="w-16 h-16 object-cover rounded bg-slate-700" />
                                                <div className="flex-1">
                                                    <h4 className="font-semibold text-sm line-clamp-1">{item.name}</h4>
                                                    <p className="text-purple-400 text-sm">฿{item.price.toLocaleString()}</p>
                                                    <div className="flex items-center gap-3 mt-2">
                                                        <button onClick={() => updateQuantity(item.id, -1)} className="w-6 h-6 bg-slate-700 rounded">-</button>
                                                        <span className="text-sm">{item.quantity}</span>
                                                        <button onClick={() => updateQuantity(item.id, 1)} className="w-6 h-6 bg-slate-700 rounded">+</button>
                                                    </div>
                                                </div>
                                                <button onClick={() => removeFromCart(item.id)} className="text-gray-500 hover:text-red-500 self-start"><i className="fa-solid fa-trash-can"></i></button>
                                            </div>
                                        ))
                                    }
                                </div>
                                <div className="p-5 border-t border-slate-800 bg-slate-800/30">
                                    <div className="flex justify-between mb-4 text-xl font-bold text-white">
                                        <span>ยอดรวม</span><span className="text-purple-400">฿{totalAmount.toLocaleString()}</span>
                                    </div>
                                    <button 
                                        onClick={() => {
                                            setIsCartOpen(false);
                                            if (!user) {
                                                setView("LOGIN");
                                                showNotification("กรุณาเข้าสู่ระบบก่อนชำระเงิน");
                                            } else {
                                                setView("CHECKOUT");
                                            }
                                        }}
                                        disabled={cart.length === 0}
                                        className="w-full py-3 rounded-lg font-bold bg-purple-600 hover:bg-purple-700 text-white disabled:bg-slate-700 disabled:cursor-not-allowed"
                                    >
                                        ดำเนินการชำระเงิน
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    <footer className="mt-auto border-t border-slate-800 bg-slate-900 py-6 text-center text-gray-500 text-sm">
                        <p>© 2024 GamingGearTH. ระบบ Demo เพื่อการศึกษา</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
